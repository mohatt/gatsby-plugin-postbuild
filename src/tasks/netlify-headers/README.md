# Netlify Headers
A Postbuild task that transforms HTML link tags with resource hints eg. `<link rel=preload>` into HTTP Link headers using Netlify's `_headers`
file while adding other useful security and caching headers.

## Usage
Enable the task in our `gatsby-config.js`
```javascript
plugins: [
  {
    resolve: `gatsby-plugin-postbuild`,
    options: {
      'netlify-headers': {
        enabled: true
      }
    }
  }
]
```

## Options

### Adding your own headers
You can use `headers` option to add your own headers
```javascript
options: {
  'netlify-headers': {
    headers: {
      '/*': [
        'X-Frame-Options: SAMEORIGIN',
        'Basic-Auth: john:password mike:anotherpassword'
      ]
    }
  }
}
```

You can also use `[page]` path to add headers to all pages generated by Gatsby
```javascript
options: {
  'netlify-headers': {
    headers: {
      '[page]': [
        'Link: </path/to/script.js>; rel=preload; as=script',
        'Link: </static/image.png>; rel=preload; as=image'
      ]
    }
  }
}
```

### Security headers
The task adds some basic security headers by default, you can disable this behaviour by setting `security: false`

### Caching headers
The task adds caching headers for immutable asstets by default, you can disable this behaviour by setting `caching: false`

You can also use `cachingAssetTypes` option to specifiy which asset types should be considered immutable
```javascript
options: {
  'netlify-headers': {
    cachingAssetTypes: ['image', 'script', 'style', 'font']
  }
}
```

### HTML link tags
The task removes the processed link tags by default, you can disable this behaviour by setting `removeLinkTags: false`

### Manipulating generated links
You can use `transformPathLinks` options to define a callback for manipulating links under each path
```typescript
options: {
  'netlify-headers': {
    transformPathLinks: (links: Link[], path: string) => {
      return links.map(link => {
        if (link.href === 'something') {
          link.priority = 5
        }
        return link
      })
    }
  }
}
```