# HTTP Headers

Generate provider-specific HTTP header configuration files from Gatsby's build output. The task consolidates HTML hints and meta tags, merges them with your overrides, and writes the right file for your hosting platform.

## Highlights

- Supports [Netlify](https://docs.netlify.com/routing/headers/) (`_headers`), [Vercel](https://vercel.com/docs/configuration#project/headers) (`vercel.json`), and [Firebase](https://firebase.google.com/docs/hosting/full-config#headers) (`firebase.json`).
- Converts `<link>` resource hints (`preconnect`, `dns-prefetch`, `preload`, `prerender`, `prefetch`) into `Link` headers.
- Converts supported `<meta http-equiv>` and `<meta name>` tags into HTTP headers, including `Content-Security-Policy`, `Set-Cookie`, and `X-Robots-Tag` variants.
- Supports setting site-wide headers or custom headers for generated pages, assets, static and page-data files.
- Lets you configure global headers and granular path-specific headers for pages, assets, and other build artifacts (`/page-data/**`, `/static/**`).

## Usage

```javascript
plugins: [
  {
    resolve: `gatsby-plugin-postbuild`,
    options: {
      'http-headers': {
        enabled: true, // Enable the task
        provider: 'netlify', // Headers config file provider [netlify, vercel, firebase]
        headers: {
          '[*]': {
            // Add headers to all paths
            'X-Frame-Options': 'DENY',
            'X-XSS-Protection': '1; mode=block',
          },
          '[pages]': {
            // Add headers to all generated pages
            'X-Robots-Tag': 'noindex',
            Link: [
              '<[asset:/static/logo.png]>; rel=preload; as=image', // Will be translated to </static/logo-[hash].png>; rel=preload; as=image
              '</custom/path/to/script.js>; rel=preload; as=script',
            ],
          },
          '[assets]': {}, // Add headers to all immutable assets generated by Gatsby
          '[page-data]': {}, // Add headers to page-data/* files
          '[static]': {}, // Add headers to static/* files
          '/path/to/unknown': {}, // Add custom path headers
          '/about': {}, // Overwrite headers for specific page
          '/static/logo.png': {}, // Overwrite headers for specific asset. Will be translated to `/static/logo-[hash].png`
        },
        security: true, // Adds some basic security headers
        caching: true, // Adds essential caching headers
        removeLinkTags: true, // Remove the processed link tags
        transformPathLinks: (links: Link[], path: string) => {
          // Callback for manipulating links under each path
          return links.map((link) => {
            if (link.href === 'something') {
              link.priority = 5
            }
            return link
          })
        },
        removeMetaTags: true, // Remove the processed meta tags
        transformPathMetas: (metas: Meta[], path: string) => {
          // Callback for manipulating metas under each path
          return metas.filter((meta) => {
            if (meta.name === 'googlebot') {
              return false
            }
            return meta
          })
        },
      },
    },
  },
]
```
